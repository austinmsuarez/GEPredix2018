#!/bin/bash -e
set -e
set -x
if [ -e .gitmodules ]; then
  git checkout develop
  cat .git/config
  cp .gitmodules .gitmodules.orig
  cp scripts/.gitmodules_develop .gitmodules
  git status
  ./scripts/pullSubModules.sh
  mv .gitmodules.orig .gitmodules
  git add -u
  git status
  commitsFound=`git status | grep -E "Your branch is ahead|Changes to be committed" | wc -l`
  echo "commitsFound=$commitsFound"
  if [ "$commitsFound" -gt "0" ]; then
    git commit -m 'update submodule commit reference' > /dev/null &>/dev/null
    git status
    git push
    git status
  fi
fi
