#!/bin/bash
set -e
set -x
VERSION=""
if [ -e ./VERSION ]; then
  VERSION=$(cat VERSION)
elif [ -e .gitmodules ]; then
  VERSION=$(grep version pom.xml | grep -v xml | sed s/\<version\>//g | sed s/\<\\/version\>//g)
elif [ -e pom.xml ]; then
  VERSION=$(printf 'POM_VERSION=${project.version}' | mvn org.apache.maven.plugins:maven-help-plugin:2.2:evaluate 2>/dev/null | grep '^POM_VERSION' | awk -F"=" '{print $2}')
elif [ -e package.json ]; then
  VERSION=$(jq -r .version package.json)
elif [ -e version.json ]; then
  VERSION=$(jq -r .version version.json)
else
  echo ""
	echo "version file for repo is required for tagging, also ensure version is incremented in develop branch after release"
	echo ""
	exit 1
fi

echo $VERSION
